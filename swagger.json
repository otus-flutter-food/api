{
  "openapi": "3.0.0",
  "info": {
    "title": "Food Recipe API",
    "description": "REST API 4;O ?@8;>65=8O @5F5?B>2",
    "version": "1.0.0",
    "contact": {
      "name": "OTUS Flutter Course",
      "email": "support@example.com"
    }
  },
  "servers": [
    {
      "url": "http://localhost:8888",
      "description": "Local development server"
    },
    {
      "url": "http://192.162.246.40:8888",
      "description": "Production server"
    }
  ],
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "UUID"
      }
    },
    "schemas": {
      "User": {
        "type": "object",
        "properties": {
          "id": {"type": "integer"},
          "login": {"type": "string"},
          "password": {"type": "string", "writeOnly": true},
          "first_name": {"type": "string"},
          "last_name": {"type": "string"},
          "phone": {"type": "string"},
          "avatar_url": {"type": "string"},
          "birthday": {"type": "string", "format": "date-time"},
          "token": {"type": "string", "readOnly": true}
        }
      },
      "Recipe": {
        "type": "object",
        "properties": {
          "id": {"type": "integer"},
          "name": {"type": "string"},
          "duration": {"type": "integer", "description": "Duration in seconds"},
          "photo": {"type": "string"}
        },
        "required": ["name", "duration", "photo"]
      },
      "Ingredient": {
        "type": "object",
        "properties": {
          "id": {"type": "integer"},
          "name": {"type": "string"},
          "calories_for_unit": {"type": "number"},
          "measureunit": {"$ref": "#/components/schemas/MeasureUnit"}
        }
      },
      "MeasureUnit": {
        "type": "object",
        "properties": {
          "id": {"type": "integer"},
          "name": {"type": "string"}
        }
      },
      "Comment": {
        "type": "object",
        "properties": {
          "id": {"type": "integer"},
          "text": {"type": "string"},
          "dateTime": {"type": "string", "format": "date-time"},
          "user": {"$ref": "#/components/schemas/User"},
          "recipe": {"$ref": "#/components/schemas/Recipe"}
        }
      },
      "Favorite": {
        "type": "object",
        "properties": {
          "id": {"type": "integer"},
          "user": {"$ref": "#/components/schemas/User"},
          "recipe": {"$ref": "#/components/schemas/Recipe"}
        }
      },
      "Freezer": {
        "type": "object",
        "properties": {
          "id": {"type": "integer"},
          "user": {"$ref": "#/components/schemas/User"},
          "ingredient": {"$ref": "#/components/schemas/Ingredient"},
          "count": {"type": "number"}
        }
      }
    }
  },
  "paths": {
    "/user": {
      "post": {
        "summary": " 538AB@0F8O =>2>3> ?>;L7>20B5;O",
        "tags": ["Authentication"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {"$ref": "#/components/schemas/User"}
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful registration",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {"status": {"type": "string"}}
                }
              }
            }
          }
        }
      },
      "put": {
        "summary": "2B>@870F8O ?>;L7>20B5;O",
        "tags": ["Authentication"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "login": {"type": "string"},
                  "password": {"type": "string"}
                },
                "required": ["login", "password"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful authentication",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {"token": {"type": "string"}}
                }
              }
            }
          }
        }
      }
    },
    "/user/profile": {
      "get": {
        "summary": ">;CG8BL ?@>D8;L ?>;L7>20B5;O",
        "tags": ["User Profile"],
        "security": [{"bearerAuth": []}],
        "responses": {
          "200": {
            "description": "User profile",
            "content": {
              "application/json": {
                "schema": {"$ref": "#/components/schemas/User"}
              }
            }
          }
        }
      },
      "put": {
        "summary": "1=>28BL ?@>D8;L ?>;L7>20B5;O",
        "tags": ["User Profile"],
        "security": [{"bearerAuth": []}],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "first_name": {"type": "string"},
                  "last_name": {"type": "string"},
                  "phone": {"type": "string"},
                  "avatar_url": {"type": "string"},
                  "birthday": {"type": "string", "format": "date-time"}
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Updated profile"
          }
        }
      }
    },
    "/recipe": {
      "get": {
        "summary": ">;CG8BL A?8A>: @5F5?B>2",
        "tags": ["Recipes"],
        "parameters": [
          {"name": "page", "in": "query", "schema": {"type": "integer", "default": 1}},
          {"name": "limit", "in": "query", "schema": {"type": "integer", "default": 10}}
        ],
        "responses": {
          "200": {
            "description": "List of recipes",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {"$ref": "#/components/schemas/Recipe"}
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "!>740BL =>2K9 @5F5?B",
        "tags": ["Recipes"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {"$ref": "#/components/schemas/Recipe"}
            }
          }
        },
        "responses": {
          "200": {
            "description": "Created recipe"
          }
        }
      }
    },
    "/recipe/{id}": {
      "get": {
        "summary": ">;CG8BL @5F5?B ?> ID",
        "tags": ["Recipes"],
        "parameters": [
          {"name": "id", "in": "path", "required": true, "schema": {"type": "integer"}}
        ],
        "responses": {
          "200": {
            "description": "Recipe details"
          }
        }
      },
      "put": {
        "summary": "1=>28BL @5F5?B",
        "tags": ["Recipes"],
        "parameters": [
          {"name": "id", "in": "path", "required": true, "schema": {"type": "integer"}}
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {"$ref": "#/components/schemas/Recipe"}
            }
          }
        },
        "responses": {
          "200": {
            "description": "Updated recipe"
          }
        }
      },
      "delete": {
        "summary": "#40;8BL @5F5?B",
        "tags": ["Recipes"],
        "parameters": [
          {"name": "id", "in": "path", "required": true, "schema": {"type": "integer"}}
        ],
        "responses": {
          "200": {
            "description": "Recipe deleted"
          }
        }
      }
    },
    "/recipe/search": {
      "get": {
        "summary": ">8A: @5F5?B>2",
        "tags": ["Recipes"],
        "parameters": [
          {"name": "query", "in": "query", "required": true, "schema": {"type": "string"}},
          {"name": "page", "in": "query", "schema": {"type": "integer", "default": 1}},
          {"name": "limit", "in": "query", "schema": {"type": "integer", "default": 10}}
        ],
        "responses": {
          "200": {
            "description": "Search results"
          }
        }
      }
    },
    "/ingredient": {
      "get": {
        "summary": ">;CG8BL A?8A>: 8=3@5485=B>2",
        "tags": ["Ingredients"],
        "responses": {
          "200": {
            "description": "List of ingredients"
          }
        }
      },
      "post": {
        "summary": "!>740BL =>2K9 8=3@5485=B",
        "tags": ["Ingredients"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {"$ref": "#/components/schemas/Ingredient"}
            }
          }
        },
        "responses": {
          "200": {
            "description": "Created ingredient"
          }
        }
      }
    },
    "/ingredient/{id}": {
      "get": {
        "summary": ">;CG8BL 8=3@5485=B ?> ID",
        "tags": ["Ingredients"],
        "parameters": [
          {"name": "id", "in": "path", "required": true, "schema": {"type": "integer"}}
        ],
        "responses": {
          "200": {
            "description": "Ingredient details"
          }
        }
      },
      "put": {
        "summary": "1=>28BL 8=3@5485=B",
        "tags": ["Ingredients"],
        "parameters": [
          {"name": "id", "in": "path", "required": true, "schema": {"type": "integer"}}
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {"$ref": "#/components/schemas/Ingredient"}
            }
          }
        },
        "responses": {
          "200": {
            "description": "Updated ingredient"
          }
        }
      },
      "delete": {
        "summary": "#40;8BL 8=3@5485=B",
        "tags": ["Ingredients"],
        "parameters": [
          {"name": "id", "in": "path", "required": true, "schema": {"type": "integer"}}
        ],
        "responses": {
          "200": {
            "description": "Ingredient deleted"
          },
          "409": {
            "description": "Cannot delete ingredient used in recipes"
          }
        }
      }
    },
    "/measure_unit": {
      "get": {
        "summary": ">;CG8BL A?8A>: 548=8F 87<5@5=8O",
        "tags": ["Measure Units"],
        "responses": {
          "200": {
            "description": "List of measure units"
          }
        }
      },
      "post": {
        "summary": "!>740BL =>2CN 548=8FC 87<5@5=8O",
        "tags": ["Measure Units"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {"$ref": "#/components/schemas/MeasureUnit"}
            }
          }
        },
        "responses": {
          "200": {
            "description": "Created measure unit"
          }
        }
      }
    },
    "/comment": {
      "get": {
        "summary": ">;CG8BL A?8A>: :><<5=B0@852",
        "tags": ["Comments"],
        "parameters": [
          {"name": "recipeId", "in": "query", "schema": {"type": "integer"}},
          {"name": "userId", "in": "query", "schema": {"type": "integer"}}
        ],
        "responses": {
          "200": {
            "description": "List of comments"
          }
        }
      },
      "post": {
        "summary": "!>740BL =>2K9 :><<5=B0@89",
        "tags": ["Comments"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {"$ref": "#/components/schemas/Comment"}
            }
          }
        },
        "responses": {
          "200": {
            "description": "Created comment"
          }
        }
      }
    },
    "/favorite": {
      "get": {
        "summary": ">;CG8BL A?8A>: 871@0==>3>",
        "tags": ["Favorites"],
        "responses": {
          "200": {
            "description": "List of favorites"
          }
        }
      },
      "post": {
        "summary": ">1028BL 2 871@0==>5",
        "tags": ["Favorites"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {"$ref": "#/components/schemas/Favorite"}
            }
          }
        },
        "responses": {
          "200": {
            "description": "Added to favorites"
          },
          "409": {
            "description": "Recipe already in favorites"
          }
        }
      }
    },
    "/freezer": {
      "get": {
        "summary": ">;CG8BL A>45@68<>5 <>@>78;L=8:0",
        "tags": ["Freezer"],
        "responses": {
          "200": {
            "description": "Freezer contents"
          }
        }
      },
      "post": {
        "summary": ">1028BL ?@>4C:B 2 <>@>78;L=8:",
        "tags": ["Freezer"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {"$ref": "#/components/schemas/Freezer"}
            }
          }
        },
        "responses": {
          "200": {
            "description": "Added to freezer"
          }
        }
      }
    },
    "/user/favorites": {
      "get": {
        "summary": ">;CG8BL 871@0==K5 @5F5?BK ?>;L7>20B5;O",
        "tags": ["User"],
        "security": [{"bearerAuth": []}],
        "responses": {
          "200": {
            "description": "User's favorite recipes"
          }
        }
      }
    },
    "/user/favorites/{recipeId}": {
      "post": {
        "summary": ">1028BL @5F5?B 2 871@0==>5",
        "tags": ["User"],
        "security": [{"bearerAuth": []}],
        "parameters": [
          {"name": "recipeId", "in": "path", "required": true, "schema": {"type": "integer"}}
        ],
        "responses": {
          "200": {
            "description": "Recipe added to favorites"
          }
        }
      },
      "delete": {
        "summary": "#40;8BL @5F5?B 87 871@0==>3>",
        "tags": ["User"],
        "security": [{"bearerAuth": []}],
        "parameters": [
          {"name": "recipeId", "in": "path", "required": true, "schema": {"type": "integer"}}
        ],
        "responses": {
          "200": {
            "description": "Recipe removed from favorites"
          }
        }
      }
    },
    "/user/comments": {
      "get": {
        "summary": ">;CG8BL :><<5=B0@88 ?>;L7>20B5;O",
        "tags": ["User"],
        "security": [{"bearerAuth": []}],
        "responses": {
          "200": {
            "description": "User's comments"
          }
        }
      },
      "post": {
        "summary": "!>740BL :><<5=B0@89",
        "tags": ["User"],
        "security": [{"bearerAuth": []}],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "recipeId": {"type": "integer"},
                  "text": {"type": "string"}
                },
                "required": ["recipeId", "text"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Comment created"
          }
        }
      }
    }
  }
}